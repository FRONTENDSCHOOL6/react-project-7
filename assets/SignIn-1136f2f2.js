import{i as g,j as s,a as h,W as F,I}from"./index-c33573b8.js";import{r as a}from"./react-7b82c02c.js";import{u as V,L as x}from"./reactRouter-08e27dd4.js";import{h as $,s as q,A as P,u as k}from"./unactive-check-104860d8.js";import"./extra-3c07f53d.js";const B="rS-v",f={SubmitButton:B};function v({type:c="text",onClick:d,text:p}){return c==="primary"?f.primary:f.secondary,s.jsx("button",{type:c,onClick:d,className:f.SubmitButton,children:p})}v.propTypes={onClick:g.func,type:g.oneOf(["submit","button"]).isRequired,text:g.string.isRequired};const H="F-yG",O="TY-G",D="VttK",z="gSnp",Z="-PS6",K="CeEf",Y="eoWw",J="qfqn",M="ldSu",Q="vksP",X="cxok",t={content:H,contentWrapper:O,title:D,formWrapper:z,showPasswordLabel:Z,showPassword:K,linkGroup:Y,findId:J,findPw:M,signUpText:Q,signUp:X};function is(){const{authState:c,signIn:d}=h(),p=V(),[_,w]=a.useState(!1),[j,S]=a.useState(!1),[u,L]=a.useState(!0);a.useState(!0),a.useEffect(()=>{console.log(c)},[c]);const A=async l=>{var e;l.preventDefault();const{id:n,password:o}=b;try{const r=await d(n,o);if(console.log(r),r){console.log(r);const{token:U,record:N}=r,i={isAuth:!!N,user:N,token:U};console.log(i),await h.setState({authState:i}),console.log(h.getState().authState),console.log(i),p(`/profile/${(e=i==null?void 0:i.user)==null?void 0:e.id}`),console.log("Authentication successful.")}else console.log("Authentication failed.")}catch(r){console.error("Error during authentication:",r)}},T=/^.{6,15}$/,C=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,16}$/,[b,W]=a.useState({id:"",password:""}),[m,E]=a.useState({id:!1,password:!1}),G=()=>{L(!u)},R=()=>{j?(w(k),S(!1)):(w(P),S(!0))},y=((l,n=300)=>{let o;return(...e)=>{clearTimeout(o),o=setTimeout(l.bind(null,...e),n)}})(l=>{const{name:n,value:o}=l.target;let e;switch(n){case"id":e=T.test(o);break;case"password":e=C.test(o);break;default:return}E({...m,[n]:!e}),e&&W({...b,[n]:o})},500);return s.jsxs(s.Fragment,{children:[s.jsxs(F,{children:[s.jsx("title",{children:"타잉 7조 - SNS 로그인 페이지"}),s.jsx("meta",{name:"description",content:"멋쟁이 사자처럼 6기 7조의 파이널 프로젝트 - 티빙 클론코딩 기본 계정 로그인 페이지"}),s.jsx("meta",{property:"og:type",content:"website"}),s.jsx("meta",{property:"og:title",content:"타잉 기본 로그인 페이지"}),s.jsx("meta",{property:"og:description",content:"프로젝트 타잉 기본 계정 로그인 페이지"}),s.jsx("meta",{property:"og:image",content:"https://github.com/FRONTENDSCHOOL6/react-project-7/assets/55738193/97e6369f-6694-416c-b699-f1fe43946145"}),s.jsx("meta",{property:"og:url",content:"https://frontendschool6.github.io/react-project-7/#/signin"})]}),s.jsx("div",{className:t.content,children:s.jsxs("div",{className:t.contentWrapper,children:[s.jsx("div",{className:t.title,children:"TVING ID 로그인"}),s.jsxs("form",{onSubmit:A,className:t.formWrapper,children:[s.jsx(I,{type:"text",name:"id",onChange:y,placeholder:"아이디"}),m.id&&s.jsx("div",{style:{color:"red"},children:"올바른 아이디 형식을 입력하세요."}),s.jsxs("label",{className:"relative",children:[s.jsx(I,{type:u?"password":"text",name:"password",onChange:y,placeholder:"비밀번호"}),s.jsx("img",{src:u?$:q,alt:"비밀번호 숨김/표시 아이콘",onClick:G,className:t.showPassword})]}),m.password&&s.jsx("div",{style:{color:"red"},children:"올바른 비밀번호 형식이 아닙니다."}),s.jsxs("label",{className:t.showPasswordLabel,children:[s.jsx("img",{src:j?P:k,alt:"자동 로그인",onClick:R,className:"pr-[7px]"}),"자동로그인"]}),s.jsx(v,{type:"submit",text:"로그인하기"}),s.jsxs("span",{className:t.linkGroup,children:[s.jsxs(x,{to:"/findid",className:t.findId,children:["아이디 찾기"," "]}),"|"," ",s.jsx(x,{to:"/findpw",className:t.findPw,children:"비밀번호 찾기"})]})]}),s.jsxs("div",{className:t.signUpText,children:["아직 계정이 없으신가요?",s.jsx(x,{to:"/signup",className:t.signUp,children:"회원가입"})]})]})})]})}export{is as default};
