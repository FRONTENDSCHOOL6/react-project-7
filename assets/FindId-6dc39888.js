import{j as e,W as N,p as v}from"./index-d6e6559a.js";import{r as n}from"./react-7b82c02c.js";import{u as S}from"./idStore-1cf56993.js";import{u as T}from"./reactRouter-bd0fbe8a.js";import"./extra-3c07f53d.js";const B="CpaP",E="oZEy",z="_6X0U",F="Pd-2",$="-nPF",y="mPEr",D="ptId",L="_1ibA",C="tScL",M="jv3S",W="bb2Z",P="Tdzq",V="I3Di",w="rhZ9",R="W5CV",Z="LSAQ",t={contentSection:B,contentWrapper:E,findIdTitle:z,findIdSubtitle1:F,findIdSubtitle2:$,inputForm:y,formBorder:D,errorMessage:L,submitButton:C,eventSubmitButton:M,horizonSection:W,horizonLine:P,horizonText:V,findText1:w,findText2:R,authButton:Z};function G(){const d=T(),[b,_]=n.useState(!0),u=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;n.useState(null),n.useState(!0);const{idState:m,findId:k}=S();n.useEffect(()=>{console.log(m)},[m]);const[r,j]=n.useState(""),[f,g]=n.useState({email:!1}),[A,l]=n.useState({email:!1}),[U,h]=n.useState(null);n.useEffect(()=>{h(null)},[]);const p=a=>{const{name:s,value:o}=a.target;let i;if(s==="email")i=u.test(o),g(c=>({...c,email:!i})),j(o),i&&l(c=>({...c,email:!1}));else return r;console.log("input email=",o)},x=u.test(r),I=async a=>{if(a.preventDefault(),!x)l(s=>({...s,email:"이메일을 올바르게 입력해주세요."}));else{l(s=>({...s,email:""}));try{const s=await v.collection("users").getList(1,20,{filter:`(email= "${r}")`});if(s.items.length>0){console.log("input email=",a.target.value,"username=",s.items.at(0).username);const o=s.items.at(0).username,i={isIdFound:!0,id:o};return localStorage.setItem("pocketbase_auth",JSON.stringify(i)),console.log(i),S.setState({idState:i}),d("/successfindid"),console.log("Found UserID successful."),o}else throw h(null),d("/failedfindid"),new Error("No user found")}catch(s){console.error("Error: ",s)}}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsx("title",{children:"FindId - Taing"})}),e.jsx("div",{className:t.contentSection,children:e.jsxs("div",{className:t.contentWrapper,children:[e.jsx("div",{className:t.findIdTitle,children:"아이디 찾기"}),e.jsxs("div",{className:"",children:[e.jsx("div",{className:t.findIdSubtitle1,children:"이메일로 찾기"}),e.jsx("div",{className:t.findIdSubtitle2,children:"가입 시 등록한 이메일을 입력해주세요"})]}),e.jsxs("form",{onSubmit:p,children:[e.jsx("input",{type:"email",label:"이메일",name:"email",className:`${t.inputForm} ${f.email?`${t.formBorder}`:""}`,placeholder:"이메일",onChange:p}),f.email&&e.jsx("p",{className:t.errorMessage,children:"이메일을 올바르게 입력해주세요."}),e.jsx("div",{className:"h-8"}),e.jsx("button",{type:"submit",className:`${t.submitButton}
						${!x||b?"":`${t.eventSubmitButton}`}`,onClick:I,children:"확인"})]}),e.jsxs("div",{className:t.horizonSection,children:[e.jsx("span",{className:t.horizonLine}),e.jsx("span",{className:t.horizonText,children:"또는"}),e.jsx("span",{className:t.horizonLine})]}),e.jsxs("div",{children:[e.jsx("h4",{className:t.findText1,children:"본인인증으로 찾기"}),e.jsx("p",{className:t.findText2,children:"이미 본인인증이 완료된 계정에 한하여 아이디찾기가 가능합니다"}),e.jsx("button",{type:"submit",className:t.authButton,children:"본인인증하기"})]})]})})]})}export{G as default};
