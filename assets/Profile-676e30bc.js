import{a as x,j as s,i as o,g as P,S as y,p as S}from"./index-216c0cc6.js";import{u as f}from"./reactRouter-08e27dd4.js";import{D as b}from"./default-profile-3d4ff587.js";import{u as W}from"./useProfileStore-4a82b620.js";import{r as i}from"./react-7b82c02c.js";import"./extra-3c07f53d.js";const E="_4jlA",B="g3hd",T="SwzJ",k="uaaZ",v="Nk3y",w="u2-C",r={pageWrapper:E,contentsWrapper:B,mainTitle:T,listWrapper:k,profileButton:v,profileEditButton:w};function C(){const t=f(),{storageData:n}=x("pocketbase_auth");return s.jsx("button",{type:"button",className:r.ProfileEditButton,onClick:()=>{var e;return t(`/editprofiles/${(e=n==null?void 0:n.model)==null?void 0:e.id}`)},children:"프로필 편집"})}function j({profile:t,onClick:n}){return console.log(t),s.jsxs("li",{className:r.listWrapper,children:[s.jsx("button",{type:"button",className:r.profileButton,onClick:n,children:s.jsx("img",{src:t!=null&&t.poster?P(t,"poster"):b,alt:`유저 ${t.username}의 프로필 이미지`,className:"w-full h-full object-cover"})}),s.jsx("p",{className:"text-base text-neutral-400 my-2",children:t==null?void 0:t.username})]},t==null?void 0:t.username)}j.propTypes={profile:o.shape({username:o.string}),onClick:o.func};function h({profiles:t,onSelect:n}){return console.log(t),s.jsx("ul",{className:"flex items-center justify-center gap-7 w-2/3",children:t==null?void 0:t.map(e=>s.jsx(j,{profile:e,onClick:n(e)},e==null?void 0:e.username))})}h.propTypes={profiles:o.arrayOf(o.shape({username:o.string})),onSelect:o.func};function I(){return s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("h2",{className:"text-4xl text-center font-bold",children:"프로필 선택"}),s.jsx("p",{className:r.mainTitle,children:"시청할 프로필을 선택해주세요."})]})}function A(){var m;const t=f(),{setProfileData:n}=W(),{storageData:e}=x("pocketbase_auth"),[L,u]=i.useState(!0),[l,g]=i.useState(null);console.log(e);const N=c=>()=>{localStorage.setItem("selectedProfile",JSON.stringify(c)),n(c),t("/")};return i.useEffect(()=>{var p;const c=async()=>{var d;try{const a=await S.collection("users").getOne((d=e==null?void 0:e.model)==null?void 0:d.id,{expand:"profiles"});console.log(a),g(a)}catch(a){console.error(a)}finally{u(!1)}};if(!e||!(e!=null&&e.model)){u(!1);return}c((p=e==null?void 0:e.model)==null?void 0:p.id)},[e]),!e||!(e!=null&&e.model)?s.jsx(y,{}):s.jsx("section",{className:r.pageWrapper,children:s.jsxs("div",{className:r.contentsWrapper,children:[s.jsx(I,{}),s.jsx(h,{profiles:(m=l==null?void 0:l.expand)==null?void 0:m.profiles,onSelect:N}),s.jsx(C,{})]})})}export{A as default};
