import{j as e,W as D}from"./index-e81f522c.js";import{r as l}from"./react-7b82c02c.js";import{u as E,L as o}from"./reactRouter-bd0fbe8a.js";import{h as F,s as V,A as h,u as f}from"./red-check-178813c9.js";import{u as b}from"./authStore-84235a31.js";import"./extra-3c07f53d.js";function O(){const{authState:d,signIn:j}=b(),w=E(),[H,x]=l.useState(!1),[p,u]=l.useState(!1),[r,N]=l.useState(!0);l.useState(!0),l.useEffect(()=>{console.log(d)},[d]);const S=async n=>{n.preventDefault();const{id:a,password:s}=g;try{const t=await j(a,s);if(console.log(t),t){const{token:P,record:T}=t,c={isAuth:!0,user:T,token:P};localStorage.setItem("pocketbase_auth",JSON.stringify(c)),console.log(c),b.setState({authState:c}),w("/"),console.log("Authentication successful.")}else console.log("Authentication failed.")}catch(t){console.error("Error during authentication:",t)}},v=/^.{6,15}$/,y=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,16}$/,[g,k]=l.useState({id:"",password:""}),[i,I]=l.useState({id:!1,password:!1}),A=()=>{N(!r)},C=()=>{p?(x(f),u(!1)):(x(h),u(!0))},L=(n,a=300)=>{let s;return(...t)=>{clearTimeout(s),s=setTimeout(n.bind(null,...t),a)}},m=n=>{const{name:a,value:s}=n.target;let t;switch(a){case"id":t=v.test(s);break;case"password":t=y.test(s);break;default:return}I({...i,[a]:!t}),t&&k({...g,[a]:s})},z=L(m,500);return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsx("title",{children:"Sign In - Taing"})}),e.jsx(o,{to:"/",children:e.jsx("img",{src:"/assets/logo.svg",alt:"Taing logo",className:"w-[110px] pt=[10px]"})}),e.jsx("div",{className:"contentWrapper w-full",children:e.jsx("div",{className:"bg-black min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"pt-10 pb-16 text-white login-title container w-1/3 mx-auto",children:[e.jsx("div",{className:"pb-[60px] font-bold text-lg md:text-2xl lg:text-3xl xl:text-4xl 2xl:text-5xl text-center",children:"TVING ID 로그인"}),e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-2",children:[e.jsx("input",{type:"text",label:"아이디",name:"id",className:`font-light h-14 bg-[#212121] text-gray600 login-form px-4 w-full rounded-sm
                        `,onChange:m,placeholder:"아이디"}),i.id&&e.jsx("div",{style:{color:"red"},children:"올바른 아이디 형식을 입력하세요."}),e.jsxs("label",{className:"relative",children:[e.jsx("input",{type:r?"password":"text",label:"비밀번호",name:"password",onChange:z,className:"h-14  bg-[#212121] text-gray600 login-form px-4 w-full rounded-sm",placeholder:"비밀번호"}),e.jsx("img",{src:r?F:V,alt:"비밀번호 숨김/표시 아이콘",onClick:A,className:"cursor-pointer absolute right-6 top-1/2 first-line:transform -translate-y-1/2"})]}),i.password&&e.jsx("div",{style:{color:"red"},children:"올바른 비밀번호 형식이 아닙니다."}),e.jsxs("label",{className:"flex text-left text-gray500 text-sm pt-[7px] pb-[10px]",children:[e.jsx("img",{src:p?h:f,alt:"자동 로그인",onClick:C,className:"pr-[7px]"}),"자동로그인"]}),e.jsx("button",{type:"submit",className:"h-14 bg-[#FF153C] font-bold dark:hover:bg-[#cc1030] text-white login-button w-full rounded-sm",children:"로그인하기"}),e.jsxs("span",{className:"text-gray300 text-center pt-[20px] pb-[10px] md:text-xs lg:text-base xl:text-md 2xl:text-lg",children:[e.jsxs(o,{to:"/findid",className:"text-gray400 dark:hover:text-zinc-300 pr-[13px]",children:["아이디 찾기"," "]}),"|"," ",e.jsx(o,{to:"/findpw",className:"text-gray400 pl-[10px] dark:hover:text-zinc-300",children:"비밀번호 찾기"})]})]}),e.jsxs("div",{className:`flex justify-center pt-[30px] pl-[60px] pb-[100px] border-slate-600 dark:border-slate-200/30
             sm:text-xs md:text-base lg:text-base xl:text-md 2xl:text-lg
             `,children:["아직 계정이 없으신가요?",e.jsx(o,{to:"/signup",className:"dark:text-zinc-500 w-36 text-l dark:hover:text-zinc-300 flex pl-[10px]",children:"회원가입"})]})]})})})]})}export{O as default};
