import{a as d,j as e,i as o,g as b,u as y,p as L}from"./index-216c0cc6.js";import{u as p}from"./reactRouter-08e27dd4.js";import{r as l}from"./react-7b82c02c.js";import{D as N}from"./default-profile-3d4ff587.js";import"./extra-3c07f53d.js";function P(){const s=p(),{storageData:t}=d("pocketbase_auth");return e.jsxs("button",{type:"button",className:"block w-2/5 box-border border font-bold text-center mt-2 px-0 py-3 border-solid rounded bg-[#dedede] text-black border-[#dedede] hover:border-white hover:bg-white",onClick:()=>{var r;return s(`/profile/${(r=t==null?void 0:t.model)==null?void 0:r.id}`)},children:[" ","완료"]})}function k(){return e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("h2",{className:"text-4xl text-center font-bold",children:"프로필 편집"})})}const v="yEM-",S="_4u41",w="QHXz",c={profileListSection:v,profileListWrapper:S,editButton:w};function f({profile:s,onClick:t}){return e.jsxs("li",{className:"flex flex-col justify-center items-center w-full",children:[e.jsx("button",{type:"button",className:`${c.editButton}`,onClick:t,children:e.jsx("img",{src:s.poster?b(s,"poster"):N,alt:`유저 ${s.username}의 프로필 이미지`,className:"w-full h-full object-cover opacity-50"})}),e.jsx("p",{className:"text-lg text-neutral-400 my-2",children:s.username})]})}f.propTypes={profile:o.shape({username:o.string}),onClick:o.func};function m({profiles:s,onProfileClick:t}){return e.jsx("ul",{className:c.profileListWrapper,children:s==null?void 0:s.map(r=>e.jsx(f,{profile:r,onClick:()=>t(r)},r.username))})}m.propTypes={profiles:o.arrayOf(o.shape({username:o.string})),onProfileClick:o.func};function x({isLoading:s,profileData:t,handleProfileClick:r}){var i;return e.jsx("div",{className:c.profileListSection,children:e.jsx("ul",{className:"flex items-center justify-center gap-7 w-2/3",children:s?e.jsx("p",{children:"Loading..."}):e.jsx(m,{profiles:(i=t==null?void 0:t.expand)==null?void 0:i.profiles,onProfileClick:r})})})}x.propTypes={isLoading:o.bool,profileData:o.shape({expand:o.shape({profiles:o.arrayOf(o.shape({username:o.string}))})}),handleProfileClick:o.func};function I(){const s=p(),{authState:t}=y();console.log(t);const{storageData:r}=d("pocketbase_auth"),[i,a]=l.useState(!0),[h,g]=l.useState(null),j=u=>{var n;s(`/editprofile/${(n=t==null?void 0:t.model)==null?void 0:n.id}/${u.id}`)};return l.useEffect(()=>{(async()=>{try{a(!0);const n=await L.collection("users").getOne(r.model.id,{expand:"profiles"});g(n)}catch(n){console.log(n)}finally{a(!1)}})(r.model.id)},[r.model.id]),e.jsx("section",{className:"bg-black w-screen h-screen flex items-center justify-center text-white my-auto relative pt-[2rem] lg:pt-[1.5rem] md:pt-[1rem]",children:e.jsxs("div",{className:"flex flex-col justify-center items-center min-h-full gap-6",children:[e.jsx(k,{}),e.jsx(x,{handleProfileClick:j,isLoading:i,profileData:h}),e.jsx(P,{})]})})}export{I as default};
