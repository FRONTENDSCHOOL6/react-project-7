import{i as g,j as s,a as h,W as F,I}from"./index-469e8a7a.js";import{r}from"./react-7b82c02c.js";import{u as V,L as f}from"./reactRouter-08e27dd4.js";import{h as $,s as q,A as P,u as k}from"./unactive-check-104860d8.js";import"./useProfileStore-4a82b620.js";import"./extra-3c07f53d.js";const B="rS-v",x={SubmitButton:B};function v({type:c="text",onClick:d,text:p}){return c==="primary"?x.primary:x.secondary,s.jsx("button",{type:c,onClick:d,className:x.SubmitButton,children:p})}v.propTypes={onClick:g.func,type:g.oneOf(["submit","button"]).isRequired,text:g.string.isRequired};const H="F-yG",O="TY-G",D="VttK",z="gSnp",Z="-PS6",K="CeEf",Y="eoWw",J="qfqn",M="ldSu",Q="vksP",X="cxok",e={content:H,contentWrapper:O,title:D,formWrapper:z,showPasswordLabel:Z,showPassword:K,linkGroup:Y,findId:J,findPw:M,signUpText:Q,signUp:X};function cs(){const{authState:c,signIn:d}=h(),p=V(),[_,w]=r.useState(!1),[j,S]=r.useState(!1),[u,A]=r.useState(!0);r.useState(!0),r.useEffect(()=>{console.log(c)},[c]);const L=async l=>{var t;l.preventDefault();const{id:n,password:o}=b;try{const i=await d(n,o);if(console.log("response:",i),i){console.log("인증에 성공했습니다.:",i);const{token:U,record:N}=i,a={isAuth:!!N,user:N,token:U};console.log(a),await h.setState({authState:a}),console.log(h.getState().authState),console.log(a),a.isAuth?(p(`/profile/${(t=a==null?void 0:a.user)==null?void 0:t.id}`),console.log("Authentication successful.")):alert("로그인에 실패하였습니다😓 아이디와 비밀번호를 다시 확인해주세요.")}else alert("로그인에 실패했습니다. 아이디와 비밀번호를 확인해주세요."),console.log("Authentication failed.")}catch(i){console.error("Error during authentication:",i)}},T=/^.{6,15}$/,C=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,16}$/,[b,W]=r.useState({id:"",password:""}),[m,E]=r.useState({id:!1,password:!1}),G=()=>{A(!u)},R=()=>{j?(w(k),S(!1)):(w(P),S(!0))},y=((l,n=300)=>{let o;return(...t)=>{clearTimeout(o),o=setTimeout(l.bind(null,...t),n)}})(l=>{const{name:n,value:o}=l.target;let t;switch(n){case"id":t=T.test(o);break;case"password":t=C.test(o);break;default:return}E({...m,[n]:!t}),t&&W({...b,[n]:o})},500);return s.jsxs(s.Fragment,{children:[s.jsxs(F,{children:[s.jsx("title",{children:"타잉 7조 - SNS 로그인 페이지"}),s.jsx("meta",{name:"description",content:"멋쟁이 사자처럼 6기 7조의 파이널 프로젝트 - 티빙 클론코딩 기본 계정 로그인 페이지"}),s.jsx("meta",{property:"og:type",content:"website"}),s.jsx("meta",{property:"og:title",content:"타잉 기본 로그인 페이지"}),s.jsx("meta",{property:"og:description",content:"프로젝트 타잉 기본 계정 로그인 페이지"}),s.jsx("meta",{property:"og:image",content:"https://github.com/FRONTENDSCHOOL6/react-project-7/assets/55738193/97e6369f-6694-416c-b699-f1fe43946145"}),s.jsx("meta",{property:"og:url",content:"https://frontendschool6.github.io/react-project-7/#/signin"})]}),s.jsx("div",{className:e.content,children:s.jsxs("div",{className:e.contentWrapper,children:[s.jsx("div",{className:e.title,children:"TVING ID 로그인"}),s.jsxs("form",{onSubmit:L,className:e.formWrapper,children:[s.jsx(I,{type:"username",name:"id",onChange:y,placeholder:"아이디"}),m.id&&s.jsx("div",{style:{color:"red"},children:"올바른 아이디 형식을 입력하세요."}),s.jsxs("label",{className:"relative",children:[s.jsx(I,{type:u?"password":"text",name:"password",onChange:y,placeholder:"비밀번호"}),s.jsx("img",{src:u?$:q,alt:"비밀번호 숨김/표시 아이콘",onClick:G,className:e.showPassword})]}),m.password&&s.jsx("div",{style:{color:"red"},children:"올바른 비밀번호 형식이 아닙니다."}),s.jsxs("label",{className:e.showPasswordLabel,children:[s.jsx("img",{src:j?P:k,alt:"자동 로그인",onClick:R,className:"pr-[7px]"}),"자동로그인"]}),s.jsx(v,{type:"submit",text:"로그인하기"}),s.jsxs("span",{className:e.linkGroup,children:[s.jsxs(f,{to:"/findid",className:e.findId,children:["아이디 찾기"," "]}),"|"," ",s.jsx(f,{to:"/findpw",className:e.findPw,children:"비밀번호 찾기"})]})]}),s.jsxs("div",{className:e.signUpText,children:["아직 계정이 없으신가요?",s.jsx(f,{to:"/signup",className:e.signUp,children:"회원가입"})]})]})})]})}export{cs as default};
