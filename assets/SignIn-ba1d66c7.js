import{P as h,j as s,u as g,W as V,I as N}from"./index-216c0cc6.js";import{r as a}from"./react-7b82c02c.js";import{u as $,L as f}from"./reactRouter-08e27dd4.js";import{h as q,s as B,A as k,u as v}from"./unactive-check-104860d8.js";import"./extra-3c07f53d.js";const F="rS-v",x={SubmitButton:F};function y({type:c="text",onClick:d,text:u}){return c==="primary"?x.primary:x.secondary,s.jsx("button",{type:c,onClick:d,className:x.SubmitButton,children:u})}y.propTypes={onClick:h.func,type:h.oneOf(["submit","button"]).isRequired,text:h.string.isRequired};const H="F-yG",z="TY-G",D="VttK",Z="gSnp",K="-PS6",O="CeEf",Y="eoWw",J="qfqn",M="ldSu",Q="vksP",X="cxok",e={content:H,contentWrapper:z,title:D,formWrapper:Z,showPasswordLabel:K,showPassword:O,linkGroup:Y,findId:J,findPw:M,signUpText:Q,signUp:X};function rs(){const{authState:c,signIn:d}=g(),u=$(),[_,w]=a.useState(!1),[S,j]=a.useState(!1),[p,A]=a.useState(!0);a.useState(!0),a.useEffect(()=>{console.log(c)},[c]);const L=async l=>{var t;l.preventDefault();const{id:o,password:n}=b;try{const i=await d(o,n);if(console.log(i),i){console.log(i);const{token:R,record:P}=i,r={isAuth:!!P,user:P,token:R};console.log(r),await g.setState({authState:r}),console.log(g.getState().authState),console.log(r),u(`/profile/${(t=r==null?void 0:r.user)==null?void 0:t.id}`),console.log("Authentication successful.")}else console.log("Authentication failed.")}catch(i){console.error("Error during authentication:",i)}},T=/^.{6,15}$/,C=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,16}$/,[b,W]=a.useState({id:"",password:""}),[m,G]=a.useState({id:!1,password:!1}),U=()=>{A(!p)},E=()=>{S?(w(v),j(!1)):(w(k),j(!0))},I=((l,o=300)=>{let n;return(...t)=>{clearTimeout(n),n=setTimeout(l.bind(null,...t),o)}})(l=>{const{name:o,value:n}=l.target;let t;switch(o){case"id":t=T.test(n);break;case"password":t=C.test(n);break;default:return}G({...m,[o]:!t}),t&&W({...b,[o]:n})},500);return s.jsxs(s.Fragment,{children:[s.jsx(V,{children:s.jsx("title",{children:"Sign In - Taing"})}),s.jsx("div",{className:e.content,children:s.jsxs("div",{className:e.contentWrapper,children:[s.jsx("div",{className:e.title,children:"TVING ID 로그인"}),s.jsxs("form",{onSubmit:L,className:e.formWrapper,children:[s.jsx(N,{type:"text",name:"id",onChange:I,placeholder:"아이디"}),m.id&&s.jsx("div",{style:{color:"red"},children:"올바른 아이디 형식을 입력하세요."}),s.jsxs("label",{className:"relative",children:[s.jsx(N,{type:p?"password":"text",name:"password",onChange:I,placeholder:"비밀번호"}),s.jsx("img",{src:p?q:B,alt:"비밀번호 숨김/표시 아이콘",onClick:U,className:e.showPassword})]}),m.password&&s.jsx("div",{style:{color:"red"},children:"올바른 비밀번호 형식이 아닙니다."}),s.jsxs("label",{className:e.showPasswordLabel,children:[s.jsx("img",{src:S?k:v,alt:"자동 로그인",onClick:E,className:"pr-[7px]"}),"자동로그인"]}),s.jsx(y,{type:"submit",text:"로그인하기"}),s.jsxs("span",{className:e.linkGroup,children:[s.jsxs(f,{to:"/findid",className:e.findId,children:["아이디 찾기"," "]}),"|"," ",s.jsx(f,{to:"/findpw",className:e.findPw,children:"비밀번호 찾기"})]})]}),s.jsxs("div",{className:e.signUpText,children:["아직 계정이 없으신가요?",s.jsx(f,{to:"/signup",className:e.signUp,children:"회원가입"})]})]})})]})}export{rs as default};
