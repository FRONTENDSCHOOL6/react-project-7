import{c as w,j as e,d as E,N as y,f as I,h as g,S as B,g as f,W as P}from"./index-b4f137eb.js";import{r as s}from"./react-7b82c02c.js";import{N as R,u as h,S as j}from"./NavButton-a4153975.js";import{L as v}from"./reactRouter-08e27dd4.js";import"./extra-3c07f53d.js";function k(){const[c,u]=s.useState(""),[p,a]=s.useState(!0),[o,d]=s.useState(!1),n=s.useRef(null),l=s.useRef(null),t=r=>{a(r.isBeginning),d(r.isEnd)},[x,b]=s.useState([]),[M,m]=s.useState("pending"),[L,N]=s.useState(null);return s.useEffect(()=>{let r=!0;return m("loading"),Promise.all([w.collection("genre").getFullList()]).then(([i])=>{r&&(b([{title:"영화 장르명",data:i}]),m("success"))}).catch(i=>{r&&(N(i),m("error"))}),()=>{r=!1}},[]),e.jsx("nav",{children:e.jsxs(E,{className:"categoryNav px-[3.5%]",slidesPerView:7,breakpoints:{480:{slidesPerView:4},768:{slidesPerView:5},1024:{slidesPerView:6}},slidesPerGroup:4,navigation:{prevEl:n.current,nextEl:l.current,keyboard:!0,onlyInViewport:!1},modules:[y],onSlideChange:r=>{t(r)},children:[x==null?void 0:x.map(r=>r.data.filter(i=>i.movieCode&&i.movieCode.trim()!=="").map((i,C)=>e.jsx(e.Fragment,{children:e.jsx(I,{children:e.jsx("div",{children:e.jsx(R,{content:i.genreKR,index:C,id:i.id,activeIndex:c,setActiveIndex:u})})},i.id)}))),e.jsx(g,{className:"swiper-button-prev",ref:n}),e.jsx(g,{className:"swiper-button-next",ref:l})]})})}const S=()=>{const[c,u]=s.useState([]),[p,a]=s.useState("pending"),[o,d]=s.useState(null);return s.useEffect(()=>{a("loading"),Promise.all([w.collection("movie").getFullList()]).then(n=>{u([{title:"영화",data:n}]),a("success")}).catch(n=>{d(n),a("error")})},[]),{contents:c,status:p,error:o}};function F(){const{buttonId:c,setButtonId:u}=h(),{isButtonClicked:p,setIsButtonClicked:a}=h(),{contents:o,status:d}=S();return S(),d==="loading"?e.jsx(B,{}):p===!0?e.jsx(e.Fragment,{children:o==null?void 0:o.map(n=>n.data.map(l=>l.filter(t=>t.genre===c).map(t=>e.jsx("div",{className:j.listContent,children:e.jsxs(v,{to:`/contents/${t.id}`,children:[e.jsx("img",{src:f(t,"poster"),alt:t.title}),e.jsx("p",{className:"text-xl mt-2  whitespace-nowrap overflow-hidden text-ellipsis",children:t.title})]})},t.id))))}):e.jsx(e.Fragment,{children:o==null?void 0:o.map(n=>n.data.map(l=>l.map(t=>e.jsx("div",{className:j.listContent,children:e.jsxs(v,{to:`/contents/${t.id}`,children:[e.jsx("img",{src:f(t,"poster"),alt:t.title}),e.jsx("p",{className:"text-xl mt-2  whitespace-nowrap overflow-hidden text-ellipsis",children:t.title})]})},t.id))))})}function K(){return e.jsxs(e.Fragment,{children:[e.jsxs(P,{children:[e.jsx("title",{children:"Movies - TAING"}),e.jsx("meta",{name:"description",content:"멋쟁이 사자처럼 6기 7조의 파이널 프로젝트 - 티빙 클론코딩 타잉 영화"}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:title",content:"타잉 카테고리별 영화"}),e.jsx("meta",{property:"og:description",content:"프로젝트 타잉 영화 페이지"}),e.jsx("meta",{property:"og:image",content:"https://user-images.githubusercontent.com/116864776/270171798-0906052e-fb4a-48d7-8722-9574d08c31eb.png"}),e.jsx("meta",{property:"og:url",content:"https://frontendschool6.github.io/react-project-7/#/movie"})]}),e.jsxs("div",{className:"bg-black pt-32 px-[5%]",children:[e.jsx("h3",{className:"text-white text-4xl font-semibold mb-[2%] ml-[3%]",children:"영화"}),e.jsx(k,{}),e.jsx("div",{className:"contentWrapper w-full pt-[7%] flex flex-row gap-5 flex-wrap justify-between",children:e.jsx(F,{})})]})]})}export{K as default};
