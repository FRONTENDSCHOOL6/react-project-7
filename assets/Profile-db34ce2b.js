import{u as x,j as e,p as o,g as y,S as b,W as N,c as P}from"./index-469e8a7a.js";import{u as j}from"./reactRouter-08e27dd4.js";import{D as S}from"./default-profile-3d4ff587.js";import{u as W}from"./useProfileStore-4a82b620.js";import{r as i}from"./react-7b82c02c.js";import"./extra-3c07f53d.js";const E="_4jlA",T="g3hd",k="SwzJ",B="uaaZ",v="Nk3y",C="u2-C",c={pageWrapper:E,contentsWrapper:T,mainTitle:k,listWrapper:B,profileButton:v,profileEditButton:C};function O(){const t=j(),{storageData:n}=x("pocketbase_auth");return e.jsx("button",{type:"button",className:c.profileEditButton,onClick:()=>{var s;return t(`/editprofiles/${(s=n==null?void 0:n.model)==null?void 0:s.id}`)},children:"프로필 편집"})}function l({profile:t,onClick:n}){return console.log(t),e.jsxs("li",{className:c.listWrapper,children:[e.jsx("button",{type:"button",className:c.profileButton,onClick:n,children:e.jsx("img",{src:t!=null&&t.poster?y(t,"poster"):S,alt:`유저 ${t.username}의 프로필 이미지`,className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-base text-neutral-400 my-2",children:t==null?void 0:t.username})]},t==null?void 0:t.username)}l.propTypes={profile:o.shape({username:o.string}),onClick:o.func,isDefault:o.string};function h({profiles:t,onSelect:n}){return console.log(t),e.jsx("ul",{className:"flex items-center justify-center gap-7 w-2/3",children:t!=null&&t.expand?t==null?void 0:t.expand.profiles.map(s=>e.jsx(l,{profile:s,onClick:n(s)},s==null?void 0:s.username)):e.jsx(l,{profile:t,onClick:n(t)},t==null?void 0:t.username)})}h.propTypes={profiles:o.arrayOf(o.shape({username:o.string})),onSelect:o.func};function w(){return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("h2",{className:"text-4xl text-center font-bold",children:"프로필 선택"}),e.jsx("p",{className:c.mainTitle,children:"시청할 프로필을 선택해주세요."})]})}function z(){const t=j(),{setProfileData:n}=W(),{storageData:s}=x("pocketbase_auth"),[L,u]=i.useState(!0),[m,g]=i.useState(null);console.log(s);const f=a=>()=>{localStorage.setItem("selectedProfile",JSON.stringify(a)),n(a),t("/")};return i.useEffect(()=>{var p;const a=async()=>{var d;try{const r=await P.collection("users").getOne((d=s==null?void 0:s.model)==null?void 0:d.id,{expand:"profiles"});console.log(r),g(r)}catch(r){console.error(r)}finally{u(!1)}};if(!s||!(s!=null&&s.model)){u(!1);return}a((p=s==null?void 0:s.model)==null?void 0:p.id)},[s]),!s||!(s!=null&&s.model)?e.jsx(b,{}):e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsx("title",{children:"타잉 7조 - 프로필 페이지"}),e.jsx("meta",{name:"description",content:"멋쟁이 사자처럼 6기 7조의 파이널 프로젝트 - 티빙 클론코딩 프로필 페이지"}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{property:"og:title",content:"타잉 프로필 페이지"}),e.jsx("meta",{property:"og:description",content:"프로젝트 타잉 프로필 페이지"}),e.jsx("meta",{property:"og:image",content:"https://github.com/FRONTENDSCHOOL6/react-project-7/assets/101504272/b7f4b1cf-2d2a-42fd-a44d-0e3cbf06ef46"}),e.jsx("meta",{property:"og:url",content:"https://frontendschool6.github.io/react-project-7/#/profile/:id"})]}),e.jsx("section",{className:c.pageWrapper,children:e.jsxs("div",{className:c.contentsWrapper,children:[e.jsx(w,{}),e.jsx(h,{profiles:m||s,onSelect:f}),e.jsx(O,{})]})})]})}export{z as default};
